{"version":3,"sources":["views/ISP/ISPs.js"],"names":["override","css","ISPRow","props","index","number","isp","ispLink","id","key","toString","scope","isp_name","isp_email","isp_contact_number","isp_contact_person_name","sub_district","province","to","pathname","isp_data","token","localStorage","getItem","ISPs","headers","label","componentDidMount","a","getISPData","getIspPaginationData","getIspSearchData","handleSearchInput","e","preventDefault","searchQuery","target","value","setState","isSearchLoading","Axios","get","SECRET","response","ispSearchData","data","console","log","isLoading","status","removeItem","history","push","currentPage","limit","state","ispPaginationData","rows","totalPages","count","ispData","onSearch","this","ispList","className","size","color","loading","style","display","alignItems","justifyContent","length","filename","type","name","placeholder","width","padding","onChange","trim","test","striped","responsive","hover","map","activePage","totalItemsCount","itemsCountPerPage","itemClass","linkClass","Component"],"mappings":"miBAiBA,IAAMA,EAAWC,cAAH,KAMd,SAASC,EAAOC,GACd,IAAMC,EAAQD,EAAME,OACdC,EAAMH,EAAMG,IACZC,EAAO,qBAAiBD,EAAIE,IAElC,OACE,wBAAIC,IAAKH,EAAIE,GAAGE,YACd,wBAAIC,MAAM,OAAOP,GACjB,4BAAKE,EAAIM,UACT,4BAAKN,EAAIO,WACT,4BAAKP,EAAIQ,oBACT,4BAAKR,EAAIS,yBACT,4BAAKT,EAAIU,cACT,4BAAKV,EAAIW,UAET,4BACE,kBAAC,OAAD,CACEC,GAAI,CACFC,SAAUZ,EACVa,SAAUd,IAHd,YAaR,IAAMe,EAAQC,aAAaC,QAAQ,aAE7BC,E,kDACJ,WAAYrB,GAAQ,IAAD,8BACjB,cAAMA,IAcRsB,QAAU,CACR,CAAEC,MAAO,WAAYjB,IAAK,YAC1B,CAAEiB,MAAO,aAAcjB,IAAK,eAC5B,CAAEiB,MAAO,QAASjB,IAAK,aACvB,CAAEiB,MAAO,iBAAkBjB,IAAK,2BAChC,CAAEiB,MAAO,oBAAqBjB,IAAK,sBACnC,CAAEiB,MAAO,WAAYjB,IAAK,YAC1B,CAAEiB,MAAO,YAAajB,IAAK,gBAC3B,CAAEiB,MAAO,YAAajB,IAAK,gBAC3B,CAAEiB,MAAO,WAAYjB,IAAK,aAxBT,EA4BnBkB,kBA5BmB,sBA4BC,sBAAAC,EAAA,sEACZ,EAAKC,aADO,uBAEZ,EAAKC,uBAFO,uBAGZ,EAAKC,mBAHO,2CA5BD,EAkCnBC,kBAAoB,SAACC,GACnBA,EAAEC,iBACF,IAAMC,EAAcF,EAAEG,OAAOC,MAC7B,EAAKC,SAAS,CAAEH,YAAaA,KArCZ,EAwCnBJ,iBAxCmB,uCAwCA,WAAOI,GAAP,eAAAP,EAAA,6DACjB,EAAKU,SAAS,CAAEC,iBAAiB,IADhB,kBAIQC,IAAMC,IAAN,6CACiBN,GACtC,CACEV,QAAS,CACPJ,MAAOA,EACPqB,OAAQ,YATC,OAITC,EAJS,OAaf,EAAKL,SAAS,CAAEC,iBAAiB,IAEjC,EAAKD,SAAS,CAAEM,cAAeD,EAASE,KAAKA,OAf9B,gDAiBfC,QAAQC,IAAR,MACA,EAAKT,SAAS,CAAEU,WAAW,IACG,MAA1B,KAAML,SAASM,SACjB3B,aAAa4B,WAAW,aACxB,EAAK/C,MAAMgD,QAAQC,KAAK,wBAE1B,EAAKd,SAAS,CAAEC,iBAAiB,IAvBlB,yDAxCA,wDAmEnBT,qBAnEmB,sBAmEI,8CAAAF,EAAA,6DAAOyB,EAAP,+BAAqB,EAClCC,EAAU,EAAKC,MAAfD,MAEFjC,EAAQC,aAAaC,QAAQ,aAHd,kBAKIiB,IAAMC,IAAN,sCACUa,EADV,iBACwBD,GAC7C,CACE5B,QAAS,CACPJ,MAAOA,EACPqB,OAAQ,YAVK,OAKbC,EALa,OAcnB,EAAKL,SAAS,CAAEkB,kBAAmBb,EAASE,KAAKA,KAAKY,OACtD,EAAKnB,SAAS,CAAEoB,WAAYf,EAASE,KAAKA,KAAKc,QAf5B,kDAiBnBb,QAAQC,IAAR,MAC8B,MAA1B,KAAMJ,SAASM,SACjB3B,aAAa4B,WAAW,aACxB,EAAK/C,MAAMgD,QAAQC,KAAK,wBApBP,0DAnEJ,EA4FnBvB,WA5FmB,sBA4FN,8BAAAD,EAAA,6DACX,EAAKU,SAAS,CAAEU,WAAW,IACrB3B,EAAQC,aAAaC,QAAQ,aAFxB,kBAIciB,IAAMC,IAAI,uBAAwB,CACvDhB,QAAS,CACPJ,MAAOA,EACPqB,OAAQ,YAPH,OAIHC,EAJG,OAUT,EAAKL,SAAS,CAAEU,WAAW,IAC3B,EAAKV,SAAS,CAAEsB,QAASjB,EAASE,KAAKA,OAX9B,kDAaTC,QAAQC,IAAR,MAC8B,MAA1B,KAAMJ,SAASM,SACjB3B,aAAa4B,WAAW,aACxB,EAAK/C,MAAMgD,QAAQC,KAAK,wBAE1B,EAAKd,SAAS,CAAEU,WAAW,IAlBlB,0DA1FX,EAAKO,MAAQ,CACXK,QAAS,GACTJ,kBAAmB,GACnBR,WAAW,EACXK,YAAa,EACbK,WAAY,KACZJ,MAAO,GACPnB,YAAa,GACbS,cAAe,GACfiB,UAAU,GAXK,E,qDAkHT,IAAD,SACyDC,KAAKP,MAA7DK,EADD,EACCA,QAASJ,EADV,EACUA,kBAAmBZ,EAD7B,EAC6BA,cAAeiB,EAD5C,EAC4CA,SAC7CE,EAAUD,KAAKP,MAAMK,QAE3B,OACE,yBAAKI,UAAU,mBACZF,KAAKP,MAAMP,UACV,yBAAKgB,UAAU,eACZ,IACD,kBAAC,IAAD,CACE/D,IAAKD,EACLiE,KAAM,GACNC,MAAO,UACPC,QAASL,KAAKP,MAAMP,YANxB,mBAWA,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,yBACEoB,MAAO,CACLC,QAAS,OACTC,WAAY,SACZC,eAAgB,kBAGlB,iDACCT,KAAKP,MAAMK,QAAQY,OAAS,EAAI,KAC/B,yBAAKR,UAAU,uBACb,kBAAC,UAAD,CACES,SAAS,uBACT5B,KAAMkB,EACNtC,QAASqC,KAAKrC,SAEd,kBAAC,IAAD,CAAQuC,UAAU,MAAME,MAAM,WAC5B,uBAAGF,UAAU,mBADf,0BASV,kBAAC,IAAD,KACE,yBAAKA,UAAU,QACb,2BACEU,KAAK,OACLC,KAAK,cACLC,YAAY,YACZR,MAAO,CAAES,MAAO,OAAQC,QAAS,OACjCC,SAAU,SAAC9C,GACT,IAAMI,EAAQJ,EAAEG,OAAOC,MAAM2C,OAC7B,GAAI,MAAMC,KAAK5C,IAAoB,KAAVA,EAEvB,OADA,EAAKC,SAAS,CAAEuB,UAAU,KACnB,EAET,EAAKvB,SAAS,CAAEuB,UAAU,IAC1B,EAAK9B,iBAAiBM,EAAM2C,YAIhCnB,EA6CEC,KAAKP,MAAMhB,gBACb,yBAAKyB,UAAU,eACZ,IACD,kBAAC,IAAD,CACE/D,IAAKD,EACLiE,KAAM,GACNC,MAAO,UACPC,QAASL,KAAKP,MAAMP,YANxB,oBAUEJ,EAAc4B,OAAS,EACzB,mDAEA,kBAAC,IAAD,CAAOU,SAAO,EAACC,YAAU,EAACC,OAAK,GAC7B,+BACE,4BACE,wBAAIzE,MAAM,OAAV,MACA,wBAAIA,MAAM,OAAV,QACA,wBAAIA,MAAM,OAAV,SACA,wBAAIA,MAAM,OAAV,iBACA,wBAAIA,MAAM,OAAV,aACA,wBAAIA,MAAM,OAAV,aACA,wBAAIA,MAAM,OAAV,YAEA,wBAAIA,MAAM,OAAV,UAGJ,+BACGiC,EAAcyC,KAAI,SAAC/E,EAAKF,GAAN,OACjB,kBAACF,EAAD,CAAQG,OAAQD,EAAQ,EAAGK,IAAKL,EAAOE,IAAKA,SA1ElDwD,KAAKP,MAAMK,QAAQY,OAAS,EAC1B,0CAEA,6BACE,kBAAC,IAAD,CAAOU,SAAO,EAACC,YAAU,EAACC,OAAK,GAC7B,+BACE,4BACE,wBAAIzE,MAAM,OAAV,MACA,wBAAIA,MAAM,OAAV,YACA,wBAAIA,MAAM,OAAV,aACA,wBAAIA,MAAM,OAAV,oBACA,wBAAIA,MAAM,OAAV,kBACA,wBAAIA,MAAM,OAAV,aACA,wBAAIA,MAAM,OAAV,YAGA,wBAAIA,MAAM,OAAV,UAGJ,+BACG6C,EAAkB6B,KAAI,SAAC/E,EAAKF,GAAN,OACrB,kBAACF,EAAD,CACEG,OAAQD,EAAQ,EAChBK,IAAKL,EACLE,IAAKA,SAKb,6BACE,kBAAC,IAAD,CACEgF,WAAYxB,KAAKP,MAAMF,YACvBkC,gBAAiB3B,EAAQY,OACzBgB,kBAAmB1B,KAAKP,MAAMD,MAC9ByB,SAAU,SAAC1B,GACT,EAAKf,SAAS,CAAEe,YAAaA,IAC7B,EAAKvB,qBAAqBuB,IAE5BoC,UAAU,YACVC,UAAU,yB,GA3NnBC,aA6QJnE","file":"static/js/18.7c78d900.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { CSVLink } from \"react-csv\";\nimport Pagination from \"react-js-pagination\";\nimport {\n  Button,\n  Card,\n  CardBody,\n  CardHeader,\n  Col,\n  Row,\n  Table,\n} from \"reactstrap\";\nimport Axios from \"axios\";\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport { css } from \"@emotion/core\";\n\nconst override = css`\n  display: block;\n  margin: 0 auto;\n  border-color: #20a8d8;\n`;\n\nfunction ISPRow(props) {\n  const index = props.number;\n  const isp = props.isp;\n  const ispLink = `/admin/isp/${isp.id}`;\n\n  return (\n    <tr key={isp.id.toString()}>\n      <th scope=\"row\">{index}</th>\n      <td>{isp.isp_name}</td>\n      <td>{isp.isp_email}</td>\n      <td>{isp.isp_contact_number}</td>\n      <td>{isp.isp_contact_person_name}</td>\n      <td>{isp.sub_district}</td>\n      <td>{isp.province}</td>\n      {/* <td>{isp.createdAt}</td> */}\n      <td>\n        <Link\n          to={{\n            pathname: ispLink,\n            isp_data: isp,\n            // createdAt: isp.createdAt,\n          }}\n        >\n          Detail\n        </Link>\n      </td>\n    </tr>\n  );\n}\nconst token = localStorage.getItem(\"KEY_TOKEN\");\n\nclass ISPs extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ispData: [],\n      ispPaginationData: [],\n      isLoading: false,\n      currentPage: 1,\n      totalPages: null,\n      limit: 50,\n      searchQuery: \"\",\n      ispSearchData: [],\n      onSearch: false,\n    };\n  }\n\n  headers = [\n    { label: \"Nama ISP\", key: \"isp_name\" },\n    { label: \"Alamat ISP\", key: \"isp_address\" },\n    { label: \"Email\", key: \"isp_email\" },\n    { label: \"Contact Person\", key: \"isp_contact_person_name\" },\n    { label: \"Nomor Telepon ISP\", key: \"isp_contact_number\" },\n    { label: \"Provinsi\", key: \"province\" },\n    { label: \"Kecamatan\", key: \"sub_district\" },\n    { label: \"Kelurahan\", key: \"urbanVillage\" },\n    { label: \"Kode Pos\", key: \"zip_code\" },\n    // { label: \"Tanggal daftar\", key: \"createdAt\" },\n  ];\n\n  componentDidMount = async () => {\n    await this.getISPData();\n    await this.getIspPaginationData();\n    await this.getIspSearchData();\n  };\n\n  handleSearchInput = (e) => {\n    e.preventDefault();\n    const searchQuery = e.target.value;\n    this.setState({ searchQuery: searchQuery });\n  };\n\n  getIspSearchData = async (searchQuery) => {\n    this.setState({ isSearchLoading: true });\n\n    try {\n      const response = await Axios.get(\n        `/api/v1/customer/search/isp?search=${searchQuery}`,\n        {\n          headers: {\n            token: token,\n            SECRET: \"secret\",\n          },\n        }\n      );\n      this.setState({ isSearchLoading: false });\n\n      this.setState({ ispSearchData: response.data.data });\n    } catch (error) {\n      console.log(error);\n      this.setState({ isLoading: false });\n      if (error.response.status === 401) {\n        localStorage.removeItem(\"KEY_TOKEN\");\n        this.props.history.push(\"/admin/unauthorized\");\n      }\n      this.setState({ isSearchLoading: false });\n    }\n  };\n\n  getIspPaginationData = async (currentPage = 1) => {\n    const { limit } = this.state;\n\n    const token = localStorage.getItem(\"KEY_TOKEN\");\n    try {\n      const response = await Axios.get(\n        `/api/v1/customer/ISPs?limit=${limit}&page=${currentPage}`,\n        {\n          headers: {\n            token: token,\n            SECRET: \"secret\",\n          },\n        }\n      );\n      this.setState({ ispPaginationData: response.data.data.rows });\n      this.setState({ totalPages: response.data.data.count });\n    } catch (error) {\n      console.log(error);\n      if (error.response.status === 401) {\n        localStorage.removeItem(\"KEY_TOKEN\");\n        this.props.history.push(\"/admin/unauthorized\");\n      }\n    }\n  };\n\n  getISPData = async () => {\n    this.setState({ isLoading: true });\n    const token = localStorage.getItem(\"KEY_TOKEN\");\n    try {\n      const response = await Axios.get(\"/api/v1/customer/ISP\", {\n        headers: {\n          token: token,\n          SECRET: \"secret\",\n        },\n      });\n      this.setState({ isLoading: false });\n      this.setState({ ispData: response.data.data });\n    } catch (error) {\n      console.log(error);\n      if (error.response.status === 401) {\n        localStorage.removeItem(\"KEY_TOKEN\");\n        this.props.history.push(\"/admin/unauthorized\");\n      }\n      this.setState({ isLoading: false });\n    }\n  };\n\n  render() {\n    const { ispData, ispPaginationData, ispSearchData, onSearch } = this.state;\n    const ispList = this.state.ispData;\n\n    return (\n      <div className=\"animated fadeIn\">\n        {this.state.isLoading ? (\n          <div className=\"text-center\">\n            {\" \"}\n            <ClipLoader\n              css={override}\n              size={20}\n              color={\"#20A8D8\"}\n              loading={this.state.isLoading}\n            />\n            Memuat Data ...\n          </div>\n        ) : (\n          <Row>\n            <Col>\n              <Card>\n                <CardHeader>\n                  <div\n                    style={{\n                      display: \"flex\",\n                      alignItems: \"center\",\n                      justifyContent: \"space-between\",\n                    }}\n                  >\n                    <b>Data ISP Terdaftar</b>\n                    {this.state.ispData.length < 1 ? null : (\n                      <div className=\"card-header-actions\">\n                        <CSVLink\n                          filename=\"data_ISP_i-rural.csv\"\n                          data={ispList}\n                          headers={this.headers}\n                        >\n                          <Button className=\"btn\" color=\"primary\">\n                            <i className=\"fa fa-download\"></i>&nbsp;Unduh Data\n                            CSV\n                          </Button>\n                        </CSVLink>\n                      </div>\n                    )}\n                  </div>\n                </CardHeader>\n                <CardBody>\n                  <div className=\"mb-3\">\n                    <input\n                      type=\"text\"\n                      name=\"searchQuery\"\n                      placeholder=\"Pencarian\"\n                      style={{ width: \"100%\", padding: \"5px\" }}\n                      onChange={(e) => {\n                        const value = e.target.value.trim();\n                        if (/^\\s/.test(value) || value === \"\") {\n                          this.setState({ onSearch: false });\n                          return false;\n                        }\n                        this.setState({ onSearch: true });\n                        this.getIspSearchData(value.trim());\n                      }}\n                    />\n                  </div>\n                  {!onSearch ? (\n                    this.state.ispData.length < 1 ? (\n                      <p>Data Kosong</p>\n                    ) : (\n                      <div>\n                        <Table striped responsive hover>\n                          <thead>\n                            <tr>\n                              <th scope=\"col\">No</th>\n                              <th scope=\"col\">Nama ISP</th>\n                              <th scope=\"col\">Email ISP</th>\n                              <th scope=\"col\">Nomor Telepon CP</th>\n                              <th scope=\"col\">Contact Person</th>\n                              <th scope=\"col\">Kecamatan</th>\n                              <th scope=\"col\">Provinsi</th>\n\n                              {/* <th scope=\"col\">Tanggal Daftar</th> */}\n                              <th scope=\"col\">Aksi</th>\n                            </tr>\n                          </thead>\n                          <tbody>\n                            {ispPaginationData.map((isp, index) => (\n                              <ISPRow\n                                number={index + 1}\n                                key={index}\n                                isp={isp}\n                              />\n                            ))}\n                          </tbody>\n                        </Table>\n                        <div>\n                          <Pagination\n                            activePage={this.state.currentPage}\n                            totalItemsCount={ispData.length}\n                            itemsCountPerPage={this.state.limit}\n                            onChange={(currentPage) => {\n                              this.setState({ currentPage: currentPage });\n                              this.getIspPaginationData(currentPage);\n                            }}\n                            itemClass=\"page-item\"\n                            linkClass=\"page-link\"\n                          />\n                        </div>\n                      </div>\n                    )\n                  ) : this.state.isSearchLoading ? (\n                    <div className=\"text-center\">\n                      {\" \"}\n                      <ClipLoader\n                        css={override}\n                        size={20}\n                        color={\"#20A8D8\"}\n                        loading={this.state.isLoading}\n                      />\n                      Mencari Data ...\n                    </div>\n                  ) : ispSearchData.length < 1 ? (\n                    <p>Data Tidak Ditemukan</p>\n                  ) : (\n                    <Table striped responsive hover>\n                      <thead>\n                        <tr>\n                          <th scope=\"col\">No</th>\n                          <th scope=\"col\">Nama</th>\n                          <th scope=\"col\">Email</th>\n                          <th scope=\"col\">Nomor Telepon</th>\n                          <th scope=\"col\">Nomor KTP</th>\n                          <th scope=\"col\">Kelurahan</th>\n                          <th scope=\"col\">Provinsi</th>\n                          {/* <th scope=\"col\">Tanggal Daftar</th> */}\n                          <th scope=\"col\">Aksi</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {ispSearchData.map((isp, index) => (\n                          <ISPRow number={index + 1} key={index} isp={isp} />\n                        ))}\n                      </tbody>\n                    </Table>\n                  )}\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default ISPs;\n"],"sourceRoot":""}