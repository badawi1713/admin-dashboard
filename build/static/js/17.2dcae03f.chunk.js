(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[17],{611:function(e,t,a){"use strict";a.r(t);var n=a(507),r=a.n(n),c=a(508),s=a(82),l=a(83),o=a(85),i=a(84),m=a(159),u=a(1),d=a.n(u),h=a(158),p=a(541),E=a(544),g=a.n(E),v=a(515),b=a(516),S=a(573),f=a(545),k=a(506),y=a(574),D=a(546),C=a(509),N=a.n(C),P=a(160),x=a.n(P),K=a(109);function L(){var e=Object(m.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: #20a8d8;\n"]);return L=function(){return e},e}var T=Object(K.css)(L());function w(e){var t=e.number,a=e.customer,n="/admin/customers/".concat(a.id);return d.a.createElement("tr",{key:a.id.toString()},d.a.createElement("td",null,t),d.a.createElement("td",null,a.name),d.a.createElement("td",null,a.email),d.a.createElement("td",null,a.contact_number),d.a.createElement("td",null,a.identity_number),d.a.createElement("td",null,a.sub_district),d.a.createElement("td",null,a.province),d.a.createElement("td",null,d.a.createElement(h.Link,{to:{pathname:n,customer_data:a}},"Detail")))}var O=localStorage.getItem("KEY_TOKEN"),_=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).headers=[{label:"Nama",key:"name"},{label:"Alamat",key:"address"},{label:"Email",key:"email"},{label:"Nomor KTP",key:"identity_number"},{label:"Nomor Telepon",key:"contact_number"},{label:"Provinsi",key:"province"},{label:"Kecamatan",key:"sub_district"},{label:"Kelurahan",key:"urbanVillage"},{label:"Kode Pos",key:"zip_code"}],n.componentDidMount=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getCustomersData();case 2:return e.next=4,n.getCustomerPaginationData();case 4:return e.next=6,n.getCustomerSearchData();case 6:case"end":return e.stop()}}),e)}))),n.handleSearchInput=function(e){e.preventDefault();var t=e.target.value;n.setState({searchQuery:t})},n.getCustomerSearchData=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isSearchLoading:!0}),e.prev=1,e.next=4,N.a.get("/api/v1/customer/search/customers?search=".concat(t),{headers:{token:O,SECRET:"secret"}});case 4:a=e.sent,n.setState({isSearchLoading:!1}),n.setState({customerSearchData:a.data.data}),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),n.setState({isLoading:!1}),401===e.t0.response.status&&(localStorage.removeItem("KEY_TOKEN"),n.props.history.push("/admin/unauthorized")),n.setState({isSearchLoading:!1});case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),n.getCustomerPaginationData=Object(c.a)(r.a.mark((function e(){var t,a,c,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:1,a=n.state.limit,e.prev=2,e.next=5,N.a.get("/api/v1/customer/customers?limit=".concat(a,"&page=").concat(t),{headers:{token:O,SECRET:"secret"}});case 5:c=e.sent,n.setState({customerPaginationData:c.data.data.rows}),n.setState({totalPages:c.data.data.count}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),401===e.t0.response.status&&(localStorage.removeItem("KEY_TOKEN"),n.props.history.push("/admin/unauthorized"));case 14:case"end":return e.stop()}}),e,null,[[2,10]])}))),n.getCustomersData=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),e.prev=1,e.next=4,N.a.get("/api/v1/customer/customer",{headers:{token:O,SECRET:"secret"}});case 4:t=e.sent,n.setState({isLoading:!1}),n.setState({customerData:t.data.data}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),401===e.t0.response.status&&(localStorage.removeItem("KEY_TOKEN"),n.props.history.push("/admin/unauthorized")),n.setState({isLoading:!1});case 14:case"end":return e.stop()}}),e,null,[[1,9]])}))),n.state={customerData:[],customerPaginationData:[],isLoading:!1,isSearchLoading:!1,currentPage:1,totalPages:null,limit:50,searchQuery:"",customerSearchData:[],onSearch:!1},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.customerData,n=t.customerPaginationData,r=t.customerSearchData,c=t.onSearch,s=a;return d.a.createElement("div",{className:"animated fadeIn"},this.state.isLoading?d.a.createElement("div",{className:"text-center"}," ",d.a.createElement(x.a,{css:T,size:20,color:"#20A8D8",loading:this.state.isLoading}),"Memuat Data ..."):d.a.createElement(v.a,null,d.a.createElement(b.a,null,d.a.createElement(S.a,null,d.a.createElement(f.a,null,d.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},d.a.createElement("b",null,"Data Customer Terdaftar"),a.length<1?null:d.a.createElement("div",{className:"card-header-actions"},d.a.createElement(p.CSVLink,{filename:"data_customer_i-rural.csv",data:s,headers:this.headers},d.a.createElement(k.a,{className:"btn",color:"primary"},d.a.createElement("i",{className:"fa fa-download"}),"\xa0Unduh Data CSV"))))),d.a.createElement(y.a,null,d.a.createElement("div",{className:"mb-3"},d.a.createElement("input",{type:"text",name:"searchQuery",placeholder:"Pencarian",style:{width:"100%",padding:"5px"},onChange:function(t){var a=t.target.value.trim();if(/^\s/.test(a)||""===a)return e.setState({onSearch:!1}),!1;e.setState({onSearch:!0}),e.getCustomerSearchData(a.trim())}})),c?this.state.isSearchLoading?d.a.createElement("div",{className:"text-center"}," ",d.a.createElement(x.a,{css:T,size:20,color:"#20A8D8",loading:this.state.isLoading}),"Mencari Data ..."):r.length<1?d.a.createElement("p",null,"Data Tidak Ditemukan"):d.a.createElement(D.a,{striped:!0,responsive:!0,hover:!0},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{scope:"col"},"No"),d.a.createElement("th",{scope:"col"},"Nama"),d.a.createElement("th",{scope:"col"},"Email"),d.a.createElement("th",{scope:"col"},"Nomor Telepon"),d.a.createElement("th",{scope:"col"},"Nomor KTP"),d.a.createElement("th",{scope:"col"},"Kelurahan"),d.a.createElement("th",{scope:"col"},"Provinsi"),d.a.createElement("th",{scope:"col"},"Aksi"))),d.a.createElement("tbody",null,r.map((function(e,t){return d.a.createElement(w,{number:t+1,key:t,customer:e})})))):a.length<1?d.a.createElement("p",null,"Data Kosong"):d.a.createElement("div",null,d.a.createElement(D.a,{striped:!0,responsive:!0,hover:!0},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{scope:"col"},"No"),d.a.createElement("th",{scope:"col"},"Nama"),d.a.createElement("th",{scope:"col"},"Email"),d.a.createElement("th",{scope:"col"},"Nomor Telepon"),d.a.createElement("th",{scope:"col"},"Nomor KTP"),d.a.createElement("th",{scope:"col"},"Kecamatan"),d.a.createElement("th",{scope:"col"},"Provinsi"),d.a.createElement("th",{scope:"col"},"Aksi"))),d.a.createElement("tbody",null,n.map((function(e,t){return d.a.createElement(w,{number:t+1,key:t,customer:e})})))),d.a.createElement("div",null,d.a.createElement(g.a,{activePage:this.state.currentPage,totalItemsCount:this.state.customerData.length,itemsCountPerPage:this.state.limit,onChange:function(t){e.setState({currentPage:t}),e.getCustomerPaginationData(t)},itemClass:"page-item",linkClass:"page-link"}))))))))}}]),a}(u.Component);t.default=_}}]);
//# sourceMappingURL=17.2dcae03f.chunk.js.map